"-------------------- SETTINGS

" general settings
set nocompatible
syntax on
filetype plugin on
" filetype on
set encoding=utf-8
set noerrorbells

" cache settings
if !has('nvim')
    set viminfofile=~/.cache/vim/viminfo
    set noswapfile
    set nobackup
    set undodir=~/.cache/vim/undodir
    let g:netrw_home=$XDG_CACHE_HOME.'/vim'
    set undofile
endif

" search settings
set incsearch
set nohlsearch

" wild menu
set wildmenu
set wildmode=list:longest

set splitbelow
set splitright

set number
set relativenumber

set hidden
set tabstop=4
set softtabstop=4
set shiftwidth=4
set clipboard+=unnamedplus
set expandtab
set smartindent
set bg=dark
set exrc
set scrolloff=3
set signcolumn=yes
set guicursor=

" cursor lines
" set cursorcolumn
" set cursorline

"-------------------- MAPPINGS

let mapleader = " "


" change local settings
nnoremap <leader>ls :setlocal spell! spelllang=en_gb<CR>
nnoremap <leader>lw :setlocal nowrap!<CR>

" Window
nnoremap <leader>wh :split<CR>
nnoremap <leader>wv :vsplit<CR>
nnoremap <leader>wq <C-w>wq
nnoremap <leader>w <C-w>w
nnoremap <leader>h <C-w>h
nnoremap <leader>j <C-w>j
nnoremap <leader>k <C-w>k
nnoremap <leader>l <C-w>l
nnoremap <leader>H <C-w><
nnoremap <leader>J <C-w>>
nnoremap <leader>K <C-w>-
nnoremap <leader>L <C-w>+

" Functions
function! Compile()
    execute "w %"
    execute "! pdflatex %"
endfunction

function! ShowPDF()
    execute "! zathura $(echo % \| sed 's/tex$/pdf/') & disown"
endfunction


" File
nnoremap <leader>fc :call Compile()<CR><CR>
nnoremap <leader>fl :call ShowPDF()<CR><CR>
nnoremap <leader>fw :w<CR>
nnoremap <leader>fq :q<CR>
nnoremap <leader>fx :x<CR>
nnoremap <leader>fs :so %<CR>
nnoremap <leader>fk :q!<CR>

" Open
nnoremap <leader>of :e<Space>
nnoremap <leader>os :shell<CR>

" Run
nnoremap <leader>rp :<up><CR>

" snippet helper
imap ;; <Esc>;;
nnoremap ;; /<++><Enter>"_c4l


" pairing operators
inoremap " ""<left>
inoremap ' ''<left>
inoremap ( ()<left>
inoremap (<CR> (<CR>)<Esc>O
inoremap { {}<left>
inoremap {<CR> {<CR>}<Esc>O
inoremap [ []<left>
inoremap [<CR> [<CR>]<Esc>O


"-------------------- AUTO COMMANDS


" removing all white spaces
autocmd BufWritePre * %s/\s\+$//e

" updating X11 configs
autocmd BufWritePost ~/.Xresources,~/Xdefaults !xrdb %
autocmd BufWritePost ~/.config/vim/vimrc so %


autocmd FileType html inoremap ;e <em></em><Space><++><Esc>FeT>i


" C/C++ snippets
autocmd FileType cpp,hpp,c,h inoremap ;I #include<Space><<++>><Esc>F<"_c4l
autocmd FileType cpp,hpp,c,h inoremap ;i #include<Space>"<++>"<Esc>F<"_c4l
autocmd FileType cpp,hpp,c,h inoremap ;f <++><Space><++>(<++>)<CR>{<CR><++><CR>}<Esc>3k^"_c4l
autocmd FileType cpp,hpp,c,h inoremap ;c <++><Space>(<++>)<CR>{<CR><++><CR>}<Esc>3k0f<"_c4l
" autocmd FileType cpp,hpp,c,h inoremap ,; <Esc>A;<CR>
autocmd FileType cpp,hpp,c,h inoremap /* /*<CR><Esc>cc*/<Esc>O
autocmd FileType cpp,hpp,c,h inoremap std std::
autocmd FileType cpp,hpp,c,h inoremap cv cv::
